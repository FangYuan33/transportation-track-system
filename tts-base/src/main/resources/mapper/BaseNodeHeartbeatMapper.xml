<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tts.base.dao.BaseNodeHeartbeatMapper">

    <select id="selectInServerList" resultType="com.tts.base.domain.BaseNodeHeartbeat">
        SELECT server_ip
               ,latest_heartbeat_time
          FROM base_node_heartbeat
        WHERE server_ip in (
        <foreach item="serverIp" index="index" collection="list" separator=",">
            #{serverIp}
        </foreach>
        )
    </select>

    <select id="selectBaseNodeHeartbeatById" parameterType="java.lang.String"  resultType="com.tts.base.domain.BaseNodeHeartbeat">
        SELECT server_ip
             ,latest_heartbeat_time
        FROM base_node_heartbeat
        WHERE server_ip = #{serverIp}
    </select>

    <update id="updateBaseNodeHeartbeatById">
        UPDATE base_node_heartbeat set latest_heartbeat_time = #{latestHeartbeatTime} where server_ip = #{serverIp}
    </update>
</mapper>